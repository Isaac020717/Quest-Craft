// ALL CODE WRITTEN BY ISAAC GILES and NATHAN REINERT
// This File Combines All Classes And Functions In A Logical Way To Clearly Organise The Game

import java.awt.AWTException;
import java.awt.Robot;
Robot MouseMover;

int currentOffset = 0;
int offsetIncr = 5;
boolean positiveOffset, negativeOffset;
int screenX = 2000;
int screenY = 1600;
int startX = 600;
int startY = 400;

int gameState = 0; // 0 = construction, 1 = playing, 2 = death



// Setup Function
public void setup() {
  
  // basic setup
  fullScreen(P2D);
  frameRate(60);
  
  // setup variables
  
  // load images
  loadMaterials();
  // load character
  setUpCharacter();
  
  // setup mouse mover
  try {
    MouseMover = new Robot();
  } catch (AWTException e) {
    println("Robot Class Not Supported");
    exit();
  }
  
}



// Draw Function
public void draw() {
  
  background(250);
  applyOffset();
  
  if (gameState == 0) {
    if (constructionMode) {
      drawGrid();
      displayTerrain();
      displayConstructionUI();
      highlights();
    }
  } else if (gameState == 1) {
    text(player.Pos.x, player.Pos.x, 30);
    text(currentOffset, player.Pos.x, 60);
    displayTerrain();
    player.collisionDetection();
    playerMovement();
    player.pan();
    if (keyPressed){
     if (key == 'q'){
      gameState = 0;
     }
    }
  }
  popMatrix();
  
  
  // Press 'p' to start
  if (blockPlacingMode){
    if (keyPressed){
      if (key == 'p'){
       blockPlacingMode = false; 
      }
    }
  }
  
}



// function for applying offset when user pans left and right
void applyOffset() {
  
  if (positiveOffset) {
    currentOffset += offsetIncr;
  }
  if (negativeOffset) {
    currentOffset -= offsetIncr;
  }
  
  pushMatrix();
  translate(currentOffset, 0);
  
}
