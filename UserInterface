PImage TerrainButton, MoveTerrainButton, DeleteTerrainButton, ReturnToBuildMenu, DirtIcon, GrassIcon, LavaIcon;
boolean showReturnToBuildMenu = false;


// Button Class
class Button {
  
  String ButtonName;
  
  int standardX, buttonX, buttonY, buttonXS, buttonYS;
  String ClickFunction, UnClickFunction;
  PImage buttonImg;
  
  boolean active, hover, selected, hide;
  int hoverSizeX, hoverSizeY;
  
  // Class Declaration
  Button(int x, int y, int xs, int ys, boolean act, String cf, String uf, PImage img, String bname) {
    standardX = x;
    buttonX = x;
    buttonY = y;
    buttonXS = xs;
    hoverSizeX = buttonXS + 10;
    buttonYS = ys;
    hoverSizeY = buttonYS + 10;
    active = act;
    ClickFunction = cf;
    UnClickFunction = uf;
    buttonImg = img;
    ButtonName = bname;
  }
  
  
  // function for displaying the button
  void Display() {
    
    // change position of button based on camera offset
    buttonX = standardX - currentOffset;
    
    // check to see if mouse is over the button
    if ( mouseX > ((buttonX + currentOffset) - (buttonXS/2)) && mouseX < ((buttonX+currentOffset) + (buttonXS/2)) ) {
      if ( mouseY > (buttonY - (buttonYS/2)) && mouseY < (buttonY + (buttonYS/2)) ) {
        hover = true;
      } else {
        hover = false;
      }
    } else {
      hover = false;
    }
    
    // draw button
    imageMode(CENTER);
    if (!hover && !hide) {
      image(buttonImg, buttonX, buttonY);
    } else if (!hide) {
      image(buttonImg, buttonX, buttonY, hoverSizeX, hoverSizeY);
    }
    
    // show this label if a button is in use
    if (selected) {
      method(ClickFunction);
    }
    
  }
  
  // function for when user is clicking button
  void Click() {
    selected = true;
    method(ClickFunction);
  }
  // function for when user is clicking button
  void UnClick() {
    selected = false;
    method(UnClickFunction);
  }
  
}




// BUTTON FUNCTIONS //

// Terrain Button Functions
public void TerrainButtonClick() {
  for (Button b : ConstructionButtons) {
    if (b.ButtonName == "Dirt" || b.ButtonName == "Grass" || b.ButtonName == "Lava") {
      b.active = true;
      b.hide = false;
    }
  }
}
public void TerrainButtonUnClick() {
  for (Button b : ConstructionButtons) {
    if (b.ButtonName == "Dirt" || b.ButtonName == "Grass" || b.ButtonName == "Lava") {
      b.active = false;
      b.hide = true;
    }
  }
}

// Move Terrain Button Functions
public void MoveTerrainButtonClick() {
  blockMovingMode = true;
  for (Button b : ConstructionButtons) {
      b.active = false;
      b.hide = true;
  }
  showReturnToBuildMenu = true;
}
public void MoveTerrainButtonUnClick() {
  blockMovingMode = false;
  for (Button b : ConstructionButtons) {
    if (b.ButtonName == "MoveTerrain" || b.ButtonName == "DeleteTerrain" || b.ButtonName == "Terrain") {
      b.active = true;
      b.hide = false;
    }
  }
  showReturnToBuildMenu = false;
}

// Delete Terrain Button Functions
public void DeleteTerrainButtonClick() {
  blockDeletingMode = true;
  for (Button b : ConstructionButtons) {
      b.active = false;
      b.hide = true;
  }
  showReturnToBuildMenu = true;
}
public void DeleteTerrainButtonUnClick() {
  blockDeletingMode = false;
  for (Button b : ConstructionButtons) {
    if (b.ButtonName == "MoveTerrain" || b.ButtonName == "DeleteTerrain" || b.ButtonName == "Terrain") {
      b.active = true;
      b.hide = false;
    }
  }
  showReturnToBuildMenu = false;
}

// Dirt Button Functions
public void DirtIconClick() {
  blockPlacingMode = true;
  selectedTexture = "dirt";
  for (Button b : ConstructionButtons) {
      b.active = false;
      b.hide = true;
  }
  showReturnToBuildMenu = true;
}
public void DirtIconUnClick() {
  blockPlacingMode = false;
  for (Button b : ConstructionButtons) {
    if (b.ButtonName == "Terrain" || b.ButtonName == "MoveTerrain" || b.ButtonName == "DeleteTerrain") {
      b.active = true;
      b.hide = false;
    }
  }
  showReturnToBuildMenu = false;
}

// Grass Button Functions
public void GrassIconClick() {
  blockPlacingMode = true;
  selectedTexture = "grass";
  for (Button b : ConstructionButtons) {
      b.active = false;
      b.hide = true;
  }
  showReturnToBuildMenu = true;
}
public void GrassIconUnClick() {
  blockPlacingMode = false;
  for (Button b : ConstructionButtons) {
    if (b.ButtonName == "Terrain" || b.ButtonName == "MoveTerrain" || b.ButtonName == "DeleteTerrain") {
      b.active = true;
      b.hide = false;
    }
  }
  showReturnToBuildMenu = false;
}

// Lava Button Functions
public void LavaIconClick() {
  blockPlacingMode = true;
  selectedTexture = "lava";
  for (Button b : ConstructionButtons) {
      b.active = false;
      b.hide = true;
  }
  showReturnToBuildMenu = true;
}
public void LavaIconUnClick() {
  blockPlacingMode = false;
  for (Button b : ConstructionButtons) {
    if (b.ButtonName == "Terrain" || b.ButtonName == "MoveTerrain" || b.ButtonName == "DeleteTerrain") {
      b.active = true;
      b.hide = false;
    }
  }
  showReturnToBuildMenu = false;
}




// FUNCTIONS FOR SWITCHING BETWEEN SCREENS //

// Function For Displaying All UI For Construction
public void displayConstructionUI() {
  
  // instantiating UI classes, and loading images
  if (!ConstructionButtonsInstantiated) {
    ReturnToBuildMenu = loadImage("ReturnToBuildMenu.png");
    
    TerrainButton = loadImage("PlaceTerrain.png");
    ConstructionButtons.add( new Button(75, (height-75), 100, 100, true, "TerrainButtonClick", "TerrainButtonUnClick", TerrainButton, "Terrain") );
    
    MoveTerrainButton = loadImage("MoveTerrain.png");
    ConstructionButtons.add( new Button(width-200, (height-75), 100, 100, true, "MoveTerrainButtonClick", "MoveTerrainButtonUnClick", MoveTerrainButton, "MoveTerrain") );
    
    DeleteTerrainButton = loadImage("DeleteTerrain.png");
    ConstructionButtons.add( new Button(width-75, (height-75), 100, 100, true, "DeleteTerrainButtonClick", "DeleteTerrainButtonUnClick", DeleteTerrainButton, "DeleteTerrain") );
    
    DirtIcon = loadImage("DirtIcon.png");
    ConstructionButtons.add( new Button(75, (height-200), 70, 70, false, "DirtIconClick", "DirtIconUnClick", DirtIcon, "Dirt") );
    
    GrassIcon = loadImage("GrassIcon.png");
    ConstructionButtons.add( new Button(75, (height-300), 70, 70, false, "GrassIconClick", "GrassIconUnClick", GrassIcon, "Grass") );
    
    LavaIcon = loadImage("LavaIcon.png");
    ConstructionButtons.add( new Button(75, (height-400), 70, 70, false, "LavaIconClick", "LavaIconUnClick", LavaIcon, "Lava") );
    
    ConstructionButtonsInstantiated = true;
  }
  
  // displaying active buttons
  for (Button b : ConstructionButtons) {
    if (b.active) {
      b.Display();
    }
  }
  
  // displaying non class based UI
  if (showReturnToBuildMenu) {
    imageMode(CENTER);
    image(ReturnToBuildMenu, width/2-currentOffset, height-70);
  }
  
}



public void highlights() {
  
  if (blockDeletingMode) {
    int blockSelection = checkTerrainSelection( int(mouseX), int(mouseY) );
    if (blockSelection != 1000) {
      rectMode(CENTER); noFill(); stroke(#D12828); strokeWeight(10);
      rect(TerrainBlocks[blockSelection].xPos, TerrainBlocks[blockSelection].yPos, TerrainBlocks[blockSelection].xSize+10, TerrainBlocks[blockSelection].ySize+10);
    }
  }
  
}
