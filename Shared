// This File Contains All Functions That Are Shared Between All Files


// Mouse Pressed Function
public void mousePressed() {
  
  // check if user is clicking a button
  boolean clickingButton = false;
  for (Button b : ConstructionButtons) {
    if ( mouseX > ((b.buttonX + currentOffset) - (b.buttonXS/2)) && mouseX < ((b.buttonX + currentOffset) + (b.buttonXS/2)) ) {
      if ( mouseY > (b.buttonY - (b.buttonYS/2)) && mouseY < (b.buttonY + (b.buttonYS/2)) ) {
        if (!b.selected && b.active) {
          b.Click();
          clickingButton = true;
          break;
        } else if (b.active) {
          b.UnClick();
          clickingButton = true;
          break;
        }
      }
    }
  }
  
  if (blockPlacingMode && !placingBlock) { // BLOCK PLACING MODE (start)
    
    // if user is not clicking on a button, then draw terrain
    if (!clickingButton) {
      if (checkTerrainCollisions(int(mouseX), int(mouseY)) == "none") {
        placingBlock = true;
        for (int i = 0; i < TerrainBlocks.length; i++) {
          if (TerrainBlocks[i] == null) {
            snapMouseToGrid(false);
            TerrainBlocks[i] = new TerrainBlock(mouseX, mouseY, selectedTexture);
            blockBeingPlaced = i;
            break;
          }
        }
      }
    }
    
  } else if (blockPlacingMode) { // BLOCK PLACING MODE (end)
    
    snapMouseToGrid(false);
    if (!TerrainBlocks[blockBeingPlaced].CheckPlacementCollisions(false)) {
      placingBlock = false;
      TerrainBlocks[blockBeingPlaced].place = true;
    }
    
  } else if (blockMovingMode) { // BLOCK MOVING MODE
    
    if (!clickingButton && !movingBlock) {
      blockBeingPlaced = checkTerrainSelection( int(mouseX), int(mouseY) );
      if (blockBeingPlaced != 1000) {
        TerrainBlocks[blockBeingPlaced].moving = true;
        TerrainBlocks[blockBeingPlaced].placed = false;
        movingBlock = true;
      }
    } else if (!clickingButton && movingBlock) {
      
      snapMouseToGrid(true);
      if (!TerrainBlocks[blockBeingPlaced].CheckPlacementCollisions(true)) {
        TerrainBlocks[blockBeingPlaced].place = true;
        movingBlock = false;
      }
      
    }
    
  } else if (blockDeletingMode) { // BLOCK DELETING MODE
    
    if (!clickingButton) {
      int blockToDelete = checkTerrainSelection( int(mouseX), int(mouseY) );
      if (blockToDelete != 1000) {
        TerrainBlocks[blockToDelete] = null;
      }
    }
    
  }
  
}


// Mouse Released Function
public void mouseReleased() {
  
}


// Mouse Moved Function
public void mouseMoved() {
  
}


public void keyPressed() {
  
  if (key == CODED) {
    
    if (keyCode == RIGHT && !placingBlock) {
      
      if (constructionMode) {
        negativeOffset = true;
      }
      
    }
    if (keyCode == LEFT && !placingBlock) {
      
      if (constructionMode) {
        positiveOffset = true;
      }
      
    }
    
  } else if (key == ENTER) {
    
    for (Button b : ConstructionButtons) {
      if (b.selected == true) {
        b.UnClick();
      }
    }
    
  }
  
}



public void keyReleased() {
  
  if (key == CODED) {
    
    if (keyCode == RIGHT) {
      
      if (constructionMode) {
        negativeOffset = false;
      }
      
    }
    if (keyCode == LEFT) {
      
      if (constructionMode) {
        positiveOffset = false;
      }
      
    }
    
  }
  
}
